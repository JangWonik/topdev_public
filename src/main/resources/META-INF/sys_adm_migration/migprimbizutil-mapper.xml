<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MigPrimBizUtilMapper">

	<delete id="primBizRptFileDeleteAll">
		DELETE FROM top_prim_biz_rpt_file
	</delete>

	<select id="migForPrimBizRptFileList" resultType = "kr.co.toplac.sysadm.migration.MigPrimBizVO">
		SELECT a.rid, a.up_dir, replace(a.up_file,'|','enterpoint') splitTargetData, a.up_date
		FROM nsc_report_data a
		WHERE a.up_file != ''
		ORDER BY a.rid
	</select>

	<insert id="migPrimBizRptFileWrite" parameterType="kr.co.toplac.sysadm.migration.MigPrimBizVO">
		INSERT INTO top_prim_biz_rpt_file (suim_rpt_no, file_path, file_name, reg_date)
		VALUES(#{suim_rpt_no}, #{file_path}, #{file_name}, #{reg_date})
	</insert>

</mapper>
