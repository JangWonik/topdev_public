<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="MigPrint1700UtilMapper">

	<delete id="print17007DeleteAll">
		DELETE FROM top_rpt_print_1700_7
	</delete>

	<select id="report1Forprint17007List" resultType = "kr.co.toplac.sysadm.migration.MigrationPrint1700VO">
		SELECT a.rid, replace(replace(h_1,'/+/','enterpoint'),'|+|','-breakpoint-') splitTargetData
		FROM ls_report_1700 a
		WHERE a.h_1cn > 0
		ORDER BY a.rid
	</select>

	<insert id="print17007Write" parameterType="kr.co.toplac.sysadm.migration.MigrationPrint1700VO">
		INSERT INTO top_rpt_print_1700_7 (suim_rpt_no, attach_name, attach_copy, attach_etc_memo)
		VALUES(#{suim_rpt_no}, #{attach_name}, #{attach_copy}, #{attach_etc_memo})
	</insert>

	<update id="print17007UpdateSpaceData1">
		UPDATE top_rpt_print_1700_7 SET attach_name = ''
		WHERE attach_name = '-'
		OR attach_name = '--'
	</update>

	<update id="print17007UpdateSpaceData2">
		UPDATE top_rpt_print_1700_7 SET attach_copy = ''
		WHERE attach_copy = '-'
		OR attach_copy = '--'
	</update>

	<update id="print17007UpdateSpaceData3">
		UPDATE top_rpt_print_1700_7 SET attach_etc_memo = ''
		WHERE attach_etc_memo = '-'
		OR attach_etc_memo = '--'
	</update>

	<delete id="print17007DeleteSpaceData">
		DELETE FROM top_rpt_print_1700_7
		WHERE attach_name = ''
		AND attach_copy = ''
		AND attach_etc_memo = ''
	</delete>

	<update id="print17007UpdateSpaceData4">
		UPDATE top_rpt_print_1700_7 SET attach_name = LEFT(attach_name,CHAR_LENGTH(attach_name)-1)
		WHERE RIGHT(attach_name,1) = '-'
	</update>

	<update id="print17007UpdateSpaceData5">
		UPDATE top_rpt_print_1700_7 SET attach_etc_memo = RIGHT(attach_etc_memo,CHAR_LENGTH(attach_etc_memo)-1)
		WHERE LEFT(attach_etc_memo,1) = '-'
	</update>

	<update id="print17007UpdateSpaceData6">
		UPDATE top_rpt_print_1700_7 SET attach_copy = LEFT(attach_copy,CHAR_LENGTH(attach_copy)-1)
		WHERE RIGHT(attach_copy,1) = '-'
	</update>

	<update id="print17007UpdateSpaceData7">
		UPDATE top_rpt_print_1700_7 SET attach_copy = RIGHT(attach_copy,CHAR_LENGTH(attach_copy)-1)
		WHERE LEFT(attach_copy,1) = '-'
	</update>

</mapper>
